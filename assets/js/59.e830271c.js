(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{620:function(e,t,n){"use strict";n.r(t);var r=n(17),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h3",{attrs:{id:"æ¦‚è¦"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¦"}},[e._v("#")]),e._v(" æ¦‚è¦")]),e._v(" "),n("ul",[n("li",[e._v("Redisè¿‡æœŸé”®çš„åˆ é™¤ç­–ç•¥ï¼Ÿ")]),e._v(" "),n("li",[e._v("ä½ å¯ä»¥ç®€å•èŠèŠRediså†…å­˜æ·˜æ±°æœºåˆ¶(å›æ”¶ç­–ç•¥)")])]),e._v(" "),n("h4",{attrs:{id:"redis-è¿‡æœŸé”®çš„åˆ é™¤ç­–ç•¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-è¿‡æœŸé”®çš„åˆ é™¤ç­–ç•¥"}},[e._v("#")]),e._v(" Redis è¿‡æœŸé”®çš„åˆ é™¤ç­–ç•¥ï¼Ÿ")]),e._v(" "),n("p",[e._v("å‡ºç°æ¦‚ç‡: â˜…â˜…â˜…â˜…")]),e._v(" "),n("p",[e._v("Redisè¿‡æœŸé”®çš„åˆ é™¤ç­–ç•¥æ˜¯ï¼š"),n("font",{attrs:{color:"#FF000"}},[e._v("å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤")]),e._v("ã€‚")],1),e._v(" "),n("p",[n("img",{attrs:{src:"https://images.xiaozhuanlan.com/uploads/photo/2022/a0daa9be-c5e0-432b-a05d-fd4ddc795fd7.png",alt:""}})]),e._v(" "),n("p",[e._v("1)ã€å…³äº"),n("font",{attrs:{color:"#FF000"}},[e._v("å®šæœŸåˆ é™¤")]),e._v(", Redisé»˜è®¤ä¼šæ¯éš”100mså°±"),n("font",{attrs:{color:"#FF000"}},[e._v("éšæœº")]),e._v("é€‰å–ä¸€äº›å·²ç»è¿‡æœŸäº†çš„keyï¼Œæ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœå·²ç»è¿‡æœŸå°±åˆ é™¤ã€‚")],1),e._v(" "),n("p",[e._v("ä¸è¿‡å‡è®¾Redisé‡Œæ”¾äº†100wä¸ªkeyï¼Œè€Œä¸”éƒ½è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½ æ¯éš”å‡ ç™¾æ¯«ç§’ï¼Œå°±æ£€æŸ¥100wä¸ªkeyï¼Œé‚£ RedisåŸºæœ¬ä¸Šå°±å¡æ­»äº†ï¼Œcpuè´Ÿè½½ä¹Ÿä¼šå¾ˆé«˜çš„ï¼ŒåŸºæœ¬éƒ½æ¶ˆè€—åœ¨æ£€æŸ¥è¿‡æœŸkeyä¸Šäº†ã€‚")]),e._v(" "),n("p",[e._v("æ³¨æ„ï¼Œè¿™é‡Œå¯ä¸æ˜¯æ¯éš”100mså°±éå†æ‰€æœ‰çš„è®¾ç½®è¿‡æœŸæ—¶é—´çš„keyï¼Œé‚£æ ·å°±æ˜¯ä¸€åœºæ€§èƒ½ä¸Šçš„ç¾éš¾ã€‚å®é™…æƒ…å†µæ˜¯æ¯æ¬¡éšæœºé€‰å–ä¸€äº›keyè¿›è¡Œæ£€æŸ¥å’Œåˆ é™¤çš„ã€‚")]),e._v(" "),n("p",[e._v("ä½†å› ä¸º"),n("font",{attrs:{color:"#FF000"}},[e._v("éšæœºä¼šå¸¦æ¥ä¸ç¡®å®šæ€§")]),e._v("ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šè¿‡æœŸkeyåˆ°äº†æ—¶é—´å¹¶æ²¡æœ‰è¢«åˆ é™¤æ‰ï¼Œé‚£åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ‰€ä»¥å°±"),n("strong",[e._v("éœ€è¦æƒ°æ€§åˆ é™¤äº†")]),e._v("ã€‚")],1),e._v(" "),n("p",[e._v("å…³äºå®šæœŸåˆ é™¤æºç è§£æï¼šæ¯å½“ Redis æœåŠ¡å™¨çš„å‘¨æœŸæ€§æ“ä½œ redis.c/serverCron å‡½æ•°æ‰§è¡Œæ—¶ï¼Œredis.c/activeExpireCycle ä¼šè¢«è°ƒç”¨ã€‚\nactiveExpireCycle å‡½æ•°åœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œåˆ†å¤šæ¬¡éå†æœåŠ¡å™¨ä¸­çš„å„ä¸ªæ•°æ®åº“ï¼Œä»æ•°æ®åº“çš„ expires å­—å…¸ä¸­éšæœºæ£€æŸ¥ä¸€éƒ¨åˆ†é”®çš„è¿‡æœŸæ—¶é—´ï¼Œå¹¶åˆ é™¤å…¶ä¸­çš„è¿‡æœŸé”®ã€‚")]),e._v(" "),n("p",[e._v("current_db è®°å½•å½“å‰æ£€æŸ¥çš„æ•°æ®åº“ï¼Œå¦‚æœå‡½æ•° activeExpireCycle å½“å‰æ­£åœ¨å¤„ç† 2 å·æ•°æ®åº“ï¼Œæ—¶é—´è¶…é™ï¼Œè¿”å›åï¼Œä¸‹æ¬¡æ£€æŸ¥æ—¶ï¼Œä¼šä» 3 å·æ•°æ®åº“å¼€å§‹æ£€æŸ¥ã€‚æ‰€æœ‰æ•°æ®åº“æ£€æŸ¥ä¸€éåï¼Œcurrent_db é‡ç½®ä¸º 0ï¼Œç„¶åå†æ¬¡å¼€å§‹ä¸€è½®çš„æ£€æŸ¥å·¥ä½œã€‚")]),e._v(" "),n("p",[e._v("2)ã€å…³äº"),n("font",{attrs:{color:"#FF000"}},[e._v("æƒ°æ€§åˆ é™¤")]),e._v("ï¼Œ å½“ç”¨æˆ·è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼ŒRedisä¼šæ£€æŸ¥ä¸€ä¸‹è¿™ä¸ªkeyæ˜¯ä¸æ˜¯è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œ å¹¶ä¸”æ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸäº†æ­¤æ—¶å°±ä¼šåˆ é™¤ï¼Œä¸ä¼šç»™ç”¨æˆ·è¿”å›ä»»ä½•ä¸œè¥¿ã€‚")],1),e._v(" "),n("p",[e._v("æƒ°æ€§åˆ é™¤æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ ä¾èµ–ç”¨æˆ·çš„ä¸»åŠ¨è°ƒç”¨ï¼Œé‚£å¦‚æœä¸€äº›ç”¨æˆ·å°±é•¿æ—¶é—´æ²¡æœ‰è®¿é—®æ€ä¹ˆåŠï¼Œ ä¼šå¯¼è‡´å¤§é‡è¿‡æœŸ keyå †ç§¯åœ¨å†…å­˜é‡Œï¼Œè¿›è€Œå¯¼è‡´Redis å†…å­˜å—è€—å°½äº†ï¼Œå’‹æ•´ï¼Ÿ")]),e._v(" "),n("p",[e._v("ç­”æ¡ˆå°±æ˜¯ï¼š"),n("font",{attrs:{color:"#FF000"}},[e._v("è§¦å‘Rediså†…å­˜æ·˜æ±°æœºåˆ¶")]),e._v("ã€‚(ä¸‹é¢ä¼šè®²åˆ°)")],1),e._v(" "),n("h4",{attrs:{id:"ä½ å¯ä»¥ç®€å•èŠèŠrediså†…å­˜æ·˜æ±°æœºåˆ¶-å›æ”¶ç­–ç•¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½ å¯ä»¥ç®€å•èŠèŠrediså†…å­˜æ·˜æ±°æœºåˆ¶-å›æ”¶ç­–ç•¥"}},[e._v("#")]),e._v(" ä½ å¯ä»¥ç®€å•èŠèŠRediså†…å­˜æ·˜æ±°æœºåˆ¶(å›æ”¶ç­–ç•¥)")]),e._v(" "),n("p",[e._v("å‡ºç°æ¦‚ç‡: â˜…â˜…â˜…â˜…")]),e._v(" "),n("p",[e._v("1)ã€Rediså†…å­˜æ·˜æ±°æœºåˆ¶æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š")]),e._v(" "),n("ul",[n("li",[e._v("noeviction: å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚ï¼ˆè¿™ä¸ªæœ‰ç‚¹è¿‡äºæš´åŠ›, ä¸æ¨èï¼‰")]),e._v(" "),n("li",[e._v("allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ keyï¼ˆ"),n("font",{attrs:{color:"#FF000"}},[e._v("è¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„")]),e._v("ï¼‰ã€‚")],1),e._v(" "),n("li",[e._v("allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª keyã€‚")]),e._v(" "),n("li",[e._v("volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ keyï¼ˆè¿™ä¸ªä¸€èˆ¬ä¸å¤ªåˆé€‚ï¼‰ã€‚")]),e._v(" "),n("li",[e._v("volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª keyã€‚")]),e._v(" "),n("li",[e._v("volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„ key ä¼˜å…ˆç§»é™¤ã€‚")])]),e._v(" "),n("p",[e._v("2)ã€Redis"),n("font",{attrs:{color:"#FF000"}},[e._v("é»˜è®¤çš„è¿‡æœŸç­–ç•¥æ˜¯noeviction")]),e._v(", æœ€æš´åŠ›é‚£ä¸ª, å¦‚æœå†…å­˜æ»¡äº†é‚£å°±æ˜¯ä¸€åœºâ€œåä¸½â€çš„æ•…äº‹äº†ã€‚ ğŸ˜‚")],1),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('127.0.0.1:6379> config get maxmemory-policy\n1) "maxmemory-policy"\n2) "noeviction"\n127.0.0.1:6379>\n')])])]),n("p",[n("img",{attrs:{src:"https://images.xiaozhuanlan.com/uploads/photo/2022/cc905607-484e-42a1-9641-85741bafb36d.png",alt:""}})]),e._v(" "),n("p",[e._v("3)ã€redis.conf ä¸­çš„è¿‡æœŸæ·˜æ±°é…ç½®å¦‚ä¸‹:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory\n# is reached. You can select among five behaviors:\n#æœ€å¤§å†…å­˜ç­–ç•¥ï¼šå½“åˆ°è¾¾æœ€å¤§ä½¿ç”¨å†…å­˜æ—¶ï¼Œä½ å¯ä»¥åœ¨ä¸‹é¢5ç§è¡Œä¸ºä¸­é€‰æ‹©ï¼ŒRediså¦‚ä½•é€‰æ‹©æ·˜æ±°æ•°æ®åº“é”®\n\n#å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶\n\n# volatile-lru -> remove the key with an expire set using an LRU algorithm\n# volatile-lru ï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æŠŠ redis æ—¢å½“ç¼“å­˜ï¼ŒåˆåšæŒä¹…åŒ–å­˜å‚¨çš„æ—¶å€™æ‰ç”¨ã€‚\n\n# allkeys-lru -> remove any key according to the LRU algorithm\n# allkeys-lru ï¼šç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„key ï¼ˆæ¨èï¼‰\n\n# volatile-random -> remove a random key with an expire set\n# volatile-random ï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤ä¸€ä¸ªé”®ï¼Œä¸æ¨è\n\n# allkeys-random -> remove a random key, any key\n# allkeys-random ï¼šç›´æ¥åœ¨é”®ç©ºé—´ä¸­éšæœºç§»é™¤ä¸€ä¸ªé”®ï¼Œå¼„å•¥å»\n\n# volatile-ttl -> remove the key with the nearest expire time (minor TTL)\n# volatile-ttl ï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„keyä¼˜å…ˆç§»é™¤ ä¸æ¨è\n\n# noeviction -> don't expire at all, just return an error on write operations\n# noeviction ï¼šä¸åšè¿‡é”®å¤„ç†ï¼Œåªè¿”å›ä¸€ä¸ªå†™æ“ä½œé”™è¯¯ã€‚ä¸æ¨è\n\n# Note: with any of the above policies, Redis will return an error on write\n# operations, when there are no suitable keys for eviction.\n# ä¸Šé¢æ‰€æœ‰çš„ç­–ç•¥ä¸‹ï¼Œåœ¨æ²¡æœ‰åˆé€‚çš„æ·˜æ±°åˆ é™¤çš„é”®æ—¶ï¼Œæ‰§è¡Œå†™æ“ä½œæ—¶ï¼ŒRedis ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ä¸‹é¢æ˜¯å†™å…¥å‘½ä»¤ï¼š\n# At the date of writing these commands are: set setnx setex append\n# incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd\n# sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby\n# zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby\n# getset mset msetnx exec sort\n\n# è¿‡æœŸç­–ç•¥é»˜è®¤æ˜¯ï¼š\n# The default is:\n# maxmemory-policy noeviction\n")])])]),n("p",[e._v("ä¹Ÿæ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·: "),n("code",[e._v("æ¼«æ­¥coding")]),e._v("ã€‚ ä¸€èµ·äº¤æµ, åœ¨codingçš„ä¸–ç•Œé‡Œæ¼«æ­¥, å›å¤: "),n("font",{attrs:{color:"#FF000"}},[n("code",[e._v("redis")])]),e._v(", å…è´¹è·å–æœ€æ–°Redisé¢è¯•é¢˜(å«ç­”æ¡ˆ)ã€‚")],1),e._v(" "),n("p",[n("img",{attrs:{src:"https://images.xiaozhuanlan.com/uploads/photo/2022/5cb0c91e-fd83-4a04-8df6-65fb602b3834.png",alt:""}})]),e._v(" "),n("p",[e._v("å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©å¤§å®¶, ä¹Ÿå¸Œæœ›å¤§å®¶éƒ½èƒ½æ‰¾åˆ°çš„å¥½å·¥ä½œã€‚")])])}),[],!1,null,null,null);t.default=s.exports}}]);